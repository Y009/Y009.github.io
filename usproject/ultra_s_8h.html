<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ultrasonic distance measurer: SRC/HW/ultraS.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ultrasonic distance measurer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1e771ff450ae847412a8c28572c155bb.html">SRC</a></li><li class="navelem"><a class="el" href="dir_f653105c4220c3a096946ee9429e309c.html">HW</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ultraS.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Documentation for the ultrasonic module.  
<a href="#details">More...</a></p>

<p><a href="ultra_s_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a015eb90e0de9f16e87bd149d4b9ce959"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> { <br />
&#160;&#160;<a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959a688bb2aea3f560be00db855a2807e6fa">US_OK</a>, 
<a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959a8b86e148c08da560ab163c02be34254c">US_WORKING</a>, 
<a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959a2fd3a96bffe618698f94b9308c9b4f51">US_ERROR</a>, 
<a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959a4444eecc516e45f891e67e9278efd311">US_IDLE</a>, 
<br />
&#160;&#160;<b>US_NUMBER_OF_TYPES</b>
<br />
 }</td></tr>
<tr class="separator:a015eb90e0de9f16e87bd149d4b9ce959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5af22166e4d97bfcc7589baec25bec7b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7b">dataStatus</a> { <br />
&#160;&#160;<a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7ba2b0d9c232a242f02d30e512b8908b35a">US_DATA_FALSEMIN</a>, 
<a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7bacc98738e6892bda59facfa3ad35aac69">US_DATA_FALSEMAX</a>, 
<a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7bab4e04d20d63c362b5bba9b6125d34eee">US_DATA_TRUE</a>, 
<a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7ba2139ffa97370f4cb86ee95404d78ef7b">US_DATA_TRUE2</a>, 
<br />
&#160;&#160;<a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7bae27f17d8a7ef52a5d6d5b8c4e562d453">US_DATA_FALSE</a>, 
<a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7ba50827340ffe4c961347eb0c3e601f3c4">US_DATA_READ</a>, 
<b>US_DATA_NUMBER_OF_TYPES</b>
<br />
 }</td></tr>
<tr class="separator:a5af22166e4d97bfcc7589baec25bec7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a76007e39c7b3397710dee9bab7b5d9b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a76007e39c7b3397710dee9bab7b5d9b5">ultraS_init</a> ()</td></tr>
<tr class="separator:a76007e39c7b3397710dee9bab7b5d9b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc7671dcfab4e1cb316c3443f709a85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a2dc7671dcfab4e1cb316c3443f709a85">ultraS_sendSignal</a> ()</td></tr>
<tr class="separator:a2dc7671dcfab4e1cb316c3443f709a85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdff37f2f4e581b47645303906a09417"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#acdff37f2f4e581b47645303906a09417">ultraS_prepInfo</a> ()</td></tr>
<tr class="separator:acdff37f2f4e581b47645303906a09417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a186e138633dbd47cca8dec6f41f86fb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a186e138633dbd47cca8dec6f41f86fb4">ultraS_cyclic</a> ()</td></tr>
<tr class="separator:a186e138633dbd47cca8dec6f41f86fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85065971712e1812bab36f1366bc0416"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a85065971712e1812bab36f1366bc0416">ultraS_getValidStatus</a> ()</td></tr>
<tr class="separator:a85065971712e1812bab36f1366bc0416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa336805b30c760503c3a2c9792d1b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a3aa336805b30c760503c3a2c9792d1b0">ultraS_setValidStatus</a> (enum <a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> validStatus)</td></tr>
<tr class="separator:a3aa336805b30c760503c3a2c9792d1b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac80c09ba6b899105f44bdfe0be849296"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#ac80c09ba6b899105f44bdfe0be849296">ultraS_getDistance</a> ()</td></tr>
<tr class="separator:ac80c09ba6b899105f44bdfe0be849296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c0f2f041f3985396910a4b8c325b2a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#ad5c0f2f041f3985396910a4b8c325b2a">ultraS_getDataStatus</a> ()</td></tr>
<tr class="separator:ad5c0f2f041f3985396910a4b8c325b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5d4bdd11c244c8b0341256f5998d13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ultra_s_8h.html#a8a5d4bdd11c244c8b0341256f5998d13">ultraS_setDataStatus</a> (enum <a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7b">dataStatus</a> validStatus)</td></tr>
<tr class="separator:a8a5d4bdd11c244c8b0341256f5998d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Documentation for the ultrasonic module. </p>
<p>Global enumeration defines. </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a5af22166e4d97bfcc7589baec25bec7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5af22166e4d97bfcc7589baec25bec7b">&sect;&nbsp;</a></span>dataStatus</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7b">dataStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a5af22166e4d97bfcc7589baec25bec7ba2b0d9c232a242f02d30e512b8908b35a"></a>US_DATA_FALSEMIN&#160;</td><td class="fielddoc"><p>Under the minimum 2cm distance. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5af22166e4d97bfcc7589baec25bec7bacc98738e6892bda59facfa3ad35aac69"></a>US_DATA_FALSEMAX&#160;</td><td class="fielddoc"><p>Over the maximum 4m distance. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5af22166e4d97bfcc7589baec25bec7bab4e04d20d63c362b5bba9b6125d34eee"></a>US_DATA_TRUE&#160;</td><td class="fielddoc"><p>Data should be good and is ready to be read. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5af22166e4d97bfcc7589baec25bec7ba2139ffa97370f4cb86ee95404d78ef7b"></a>US_DATA_TRUE2&#160;</td><td class="fielddoc"><p>Time has been read from counter and is ready for processing. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5af22166e4d97bfcc7589baec25bec7bae27f17d8a7ef52a5d6d5b8c4e562d453"></a>US_DATA_FALSE&#160;</td><td class="fielddoc"><p>Initial status indicating the need to read data, so we don't read before doing any work. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5af22166e4d97bfcc7589baec25bec7ba50827340ffe4c961347eb0c3e601f3c4"></a>US_DATA_READ&#160;</td><td class="fielddoc"><p>If Read, then application has read the data. </p>
</td></tr>
</table>

</div>
</div>
<a id="a015eb90e0de9f16e87bd149d4b9ce959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015eb90e0de9f16e87bd149d4b9ce959">&sect;&nbsp;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a015eb90e0de9f16e87bd149d4b9ce959a688bb2aea3f560be00db855a2807e6fa"></a>US_OK&#160;</td><td class="fielddoc"><p>Work done. </p>
</td></tr>
<tr><td class="fieldname"><a id="a015eb90e0de9f16e87bd149d4b9ce959a8b86e148c08da560ab163c02be34254c"></a>US_WORKING&#160;</td><td class="fielddoc"><p>Working. </p>
</td></tr>
<tr><td class="fieldname"><a id="a015eb90e0de9f16e87bd149d4b9ce959a2fd3a96bffe618698f94b9308c9b4f51"></a>US_ERROR&#160;</td><td class="fielddoc"><p>Error while working. </p>
</td></tr>
<tr><td class="fieldname"><a id="a015eb90e0de9f16e87bd149d4b9ce959a4444eecc516e45f891e67e9278efd311"></a>US_IDLE&#160;</td><td class="fielddoc"><p>Waiting for work. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a186e138633dbd47cca8dec6f41f86fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a186e138633dbd47cca8dec6f41f86fb4">&sect;&nbsp;</a></span>ultraS_cyclic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ultraS_cyclic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ultrasonic modules main finite state machine.</p>
<p>Controls the work regarding the ultrasonic hardware. Finite state machine to decide state of system. </p><dl class="section attention"><dt>Attention</dt><dd>US_WORKING state is further controlled by another state machine. </dd></dl>

</div>
</div>
<a id="ad5c0f2f041f3985396910a4b8c325b2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5c0f2f041f3985396910a4b8c325b2a">&sect;&nbsp;</a></span>ultraS_getDataStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ultraS_getDataStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get ultrasonic modules workings state.</p>
<p>Get the inner FSM's state. </p><dl class="section return"><dt>Returns</dt><dd>usDataStatus</dd></dl>

</div>
</div>
<a id="ac80c09ba6b899105f44bdfe0be849296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac80c09ba6b899105f44bdfe0be849296">&sect;&nbsp;</a></span>ultraS_getDistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ultraS_getDistance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get measured distance.</p>
<dl class="section return"><dt>Returns</dt><dd>Distance </dd></dl>

</div>
</div>
<a id="a85065971712e1812bab36f1366bc0416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85065971712e1812bab36f1366bc0416">&sect;&nbsp;</a></span>ultraS_getValidStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ultraS_getValidStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Getters, Setters Get ultrasonic modules state.</p>
<dl class="section return"><dt>Returns</dt><dd>usStatus </dd></dl>

</div>
</div>
<a id="a76007e39c7b3397710dee9bab7b5d9b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76007e39c7b3397710dee9bab7b5d9b5">&sect;&nbsp;</a></span>ultraS_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ultraS_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set ultrasonic module to be ready for work.</p>
<p>Set's appropriate FSM states and resets start and end times to 0. </p>

</div>
</div>
<a id="acdff37f2f4e581b47645303906a09417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdff37f2f4e581b47645303906a09417">&sect;&nbsp;</a></span>ultraS_prepInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ultraS_prepInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates measured distance.</p>
<p>Measured distance is calculated as: end time - start time, which is then divided by 58 - constant to get the distance in centimeters. End time is the difference of the end and start time multiplier times the counter size added to the measured end time. Start time is just the measured start time. </p><dl class="section attention"><dt>Attention</dt><dd>Only when rollover happens! </dd>
<dd>
Adds the entire counter size to endTime to compensate for potential rollover. </dd></dl>

</div>
</div>
<a id="a2dc7671dcfab4e1cb316c3443f709a85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dc7671dcfab4e1cb316c3443f709a85">&sect;&nbsp;</a></span>ultraS_sendSignal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ultraS_sendSignal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send signal to the physical ultrasonic module.</p>
<p>Set's appropriate FSM state. Send's a high signal for required time - 10uS. Delays system to not send multiple signals at the same time. </p>

</div>
</div>
<a id="a8a5d4bdd11c244c8b0341256f5998d13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a5d4bdd11c244c8b0341256f5998d13">&sect;&nbsp;</a></span>ultraS_setDataStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ultraS_setDataStatus </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="ultra_s_8h.html#a5af22166e4d97bfcc7589baec25bec7b">dataStatus</a>&#160;</td>
          <td class="paramname"><em>validStatus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set ultrasonic modules workings state.</p>
<p>Set the inner FSM's state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">validStatus</td><td>Status to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3aa336805b30c760503c3a2c9792d1b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aa336805b30c760503c3a2c9792d1b0">&sect;&nbsp;</a></span>ultraS_setValidStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ultraS_setValidStatus </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="ultra_s_8h.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>&#160;</td>
          <td class="paramname"><em>validStatus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set ultrasonic modules state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">validStatus</td><td>Status to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
